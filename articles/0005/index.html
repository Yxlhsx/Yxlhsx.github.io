<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>SpringBoot Thymeleaf Html转Pdf</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="SpringBoot Thymeleaf Html转Pdf">
<meta name="description" content="通过模板引擎将html网页转为pdf">
<meta property="og:description" content="通过模板引擎将html网页转为pdf"><link rel="modulepreload" href="/articles/0005/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.243eae19.js"><link rel="preload" as="style" href="/_nuxt/entry.25dcdbaa.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.d6be917b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.92682498.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.5f2466a2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.28a08177.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.f17bda20.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.8e852669.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH1.3d28e042.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.cdab8547.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.1d2d1d96.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.a65088d2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH4.bcb78844.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.c5b8ef51.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.290d7f96.js"><link rel="prefetch" as="image" type="image/png" href="/_nuxt/logo.a48fd503.png"><link rel="prefetch" as="script" crossorigin href="/_nuxt/client-db.914fb024.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.8479eeb7.js"><link rel="stylesheet" href="/_nuxt/entry.25dcdbaa.css"><style>pre code .line{display:block;min-height:1rem}</style></head>
<body class="overflow-hidden overflow-y-scroll bg-[#f3f3f3] text-[#282828]"><div id="__nuxt"><!--[--><header class="flex justify-center w-full bg-white"><!--[--><div class="box-border m-3 w-8/12 sm:w-96 h-10 bg-gray-100 rounded-md text-center text-gray-900 text-xl font-medium leading-10 cursor-pointer"> 搜索 </div><!----><!--]--></header><div class="sm:flex justify-center"><aside class="px-5 sm:px-0 sm:w-72"><section style="" class="mt-5 mr-0 sm:mr-5 p-3 rounded-lg bg-white text-base font-semibold text-center cursor-pointer"><span class="go-back">返回上一页</span></section><div style="" class="flex sm:block justify-between"><section class="mt-5 mr-5 p-3 max-sm:w-1/2 rounded-lg bg-white"><div class="flex justify-evenly items-center mb-5"><img class="w-10 sm:w-16 h-10 sm:h-16" src="/_nuxt/logo.a48fd503.png" alt="logo"><div class="text-center"><h3 class="text-xl font-semibold">嘎嘣脆</h3><h5 class="text-[#28282899] text-sm">“努力，奋斗”</h5></div></div><ul class="flex justify-evenly list-none"><!--[--><li class="text-opacity-60 text-sm underline cursor-pointer"><span>邮箱</span></li><li class="text-opacity-60 text-sm underline cursor-pointer"><a href="https://github.com/Yxlhsx" rel="noopener noreferrer">GitHub</a></li><li class="text-opacity-60 text-sm underline cursor-pointer"><a href="https://space.bilibili.com/31257626?spm_id_from=333.1007.0.0" rel="noopener noreferrer">BiliBili</a></li><!--]--></ul></section><section class="mt-5 sm:mr-5 p-3 max-sm:w-1/2 rounded-lg bg-white"><h2 class="text-xl font-semibold text-center">标签</h2><ul class="max-sm:overflow-y-scroll flex flex-wrap mt-3 max-sm:max-h-14 list-none"><!--[--><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#JavaScript(20)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#SpringBoot(2)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#NuxtJs(6)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Mysql(4)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Java(9)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Flutter(10)</li><!--]--></ul></section></div></aside><main class="mt-5 pb-10 w-auto sm:w-5/12"><!--[--><div class="prose box-border max-sm:mx-5 p-5 sm:p-8 bg-white rounded-lg"><!--[--><div><h1 id="新建项目"><!--[-->新建项目<!--]--></h1><h2 id="说明"><a href="#说明"><!--[-->说明<!--]--></a></h2><p><!--[-->用 itextpdf 写 pdf，样式实在是太折磨了，这里选用 Thymeleaf 模板生成 html 转 pdf，html+css 写样式排版好太多了。<!--]--></p><h2 id="引入依赖"><a href="#引入依赖"><!--[-->引入依赖<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-cd1c6e">&lt;!--html转pdf--&gt;
</span></span><span class="line" line="2"><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">dependency</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="3"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">groupId</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">com.itextpdf</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">groupId</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="4"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">artifactId</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">html2pdf</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">artifactId</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="5"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">version</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">4.0.2</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">version</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="6"><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">dependency</span><span class="ct-78c20c">&gt;</span></span></code></pre><!--]--><h2 id="配置-thymeleaf"><a href="#配置-thymeleaf"><!--[-->配置 Thymeleaf<!--]--></a></h2><h4 id="applicationyml"><a href="#applicationyml"><!--[-->application.yml<!--]--></a></h4><!--[--><pre><code><span class="line" line="1"><span class="ct-b266b4">spring</span><span class="ct-9be2f0">:
</span></span><span class="line" line="2"><span class="ct-9be2f0">    </span><span class="ct-b266b4">thymeleaf</span><span class="ct-9be2f0">:
</span></span><span class="line" line="3"><span class="ct-9be2f0">        </span><span class="ct-b266b4">cache</span><span class="ct-9be2f0">: </span><span class="ct-b266b4">false
</span></span><span class="line" line="4"><span class="ct-9be2f0">        </span><span class="ct-b266b4">prefix</span><span class="ct-9be2f0">: </span><span class="ct-d0493d">classpath:/templates/
</span></span><span class="line" line="5"><span class="ct-9be2f0">        </span><span class="ct-b266b4">suffix</span><span class="ct-9be2f0">: </span><span class="ct-d0493d">.html
</span></span><span class="line" line="6"><span class="ct-9be2f0">        </span><span class="ct-b266b4">mode</span><span class="ct-9be2f0">: </span><span class="ct-d0493d">HTML
</span></span><span class="line" line="7"><span class="ct-9be2f0">        </span><span class="ct-b266b4">encoding</span><span class="ct-9be2f0">: </span><span class="ct-d0493d">UTF-8</span></span></code></pre><!--]--><h2 id="创建字体目录以及-pdf-模板"><a href="#创建字体目录以及-pdf-模板"><!--[-->创建字体目录以及 Pdf 模板<!--]--></a></h2><h4 id="创建以下文件"><a href="#创建以下文件"><!--[-->创建以下文件<!--]--></a></h4><p><!--[--><strong><!--[-->src/main/resources/font/cn.ttf<!--]--></strong> *(cn.ttf 必须是中文字体)
<strong><!--[-->src/main/resources/templates/pdf.html<!--]--></strong><!--]--></p><h4 id="pdfhtml"><a href="#pdfhtml"><!--[-->pdf.html<!--]--></a></h4><!--[--><pre><code><span class="line" line="1"><span class="ct-78c20c">&lt;!</span><span class="ct-b266b4">DOCTYPE</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">html</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="2"><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">html</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">lang</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;en&quot;</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">xmlns:th</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;http://www.thymeleaf.org&quot;</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="3"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">head</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="4"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">meta</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">charset</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;UTF-8&quot;</span><span class="ct-9be2f0"> </span><span class="ct-78c20c">/&gt;
</span></span><span class="line" line="5"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">title</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">Title</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">title</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="6"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">style</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="7"><span class="ct-9be2f0">            </span><span class="ct-5afc4e">body</span><span class="ct-9be2f0"> {
</span></span><span class="line" line="8"><span class="ct-9be2f0">                </span><span class="ct-fd2d23">font-family</span><span class="ct-9be2f0">: </span><span class="ct-d0493d">&#39;Microsoft YaHei UI&#39;</span><span class="ct-9be2f0">;
</span></span><span class="line" line="9"><span class="ct-9be2f0">            }
</span></span><span class="line" line="10"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">style</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="11"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">head</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="12"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">body</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="13"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">h1</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">检测报告</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">h1</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="14"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">div</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="15"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">p</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="16"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">ID:</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="17"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">007</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="18"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">p</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="19"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">p</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="20"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">来源:</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="21"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">span</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">th:text</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;${sys}&quot;</span><span class="ct-78c20c">&gt;&lt;/</span><span class="ct-b266b4">span</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="22"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">p</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="23"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">table</span><span class="ct-9be2f0"> </span><span class="ct-6400a5">border</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;1&quot;</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="24"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">tr</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">style</span><span class="ct-9be2f0">=</span><span class="ct-d0493d">&quot;background-color: #f6f6f6&quot;</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="25"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">id</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="26"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">name</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="27"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">age</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">th</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="28"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">tr</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="29"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">tr</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="30"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">1</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="31"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">tom</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="32"><span class="ct-9be2f0">                    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">20</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">td</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="33"><span class="ct-9be2f0">                </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">tr</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="34"><span class="ct-9be2f0">            </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">table</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="35"><span class="ct-9be2f0">        </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">div</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="36"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">body</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="37"><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">html</span><span class="ct-78c20c">&gt;</span></span></code></pre><!--]--><h2 id="创建-controller"><a href="#创建-controller"><!--[-->创建 Controller<!--]--></a></h2><h4 id="testcontrolle"><a href="#testcontrolle"><!--[-->TestControlle<!--]--></a></h4><!--[--><pre><code><span class="line" line="1"><span class="ct-b266b4">package</span><span class="ct-9be2f0"> top.yxlhsx.thymeleafdemo;
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.html2pdf.ConverterProperties;
</span></span><span class="line" line="4"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.html2pdf.HtmlConverter;
</span></span><span class="line" line="5"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.html2pdf.resolver.font.DefaultFontProvider;
</span></span><span class="line" line="6"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.io.font.FontProgram;
</span></span><span class="line" line="7"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.io.font.FontProgramFactory;
</span></span><span class="line" line="8"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> com.itextpdf.layout.font.FontProvider;
</span></span><span class="line" line="9"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.stereotype.Controller;
</span></span><span class="line" line="10"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.ui.Model;
</span></span><span class="line" line="11"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.util.ObjectUtils;
</span></span><span class="line" line="12"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.web.bind.annotation.GetMapping;
</span></span><span class="line" line="13"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.web.bind.annotation.RequestMapping;
</span></span><span class="line" line="14"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.springframework.web.bind.annotation.ResponseBody;
</span></span><span class="line" line="15"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.thymeleaf.TemplateEngine;
</span></span><span class="line" line="16"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> org.thymeleaf.context.Context;
</span></span><span class="line" line="17"><span>
</span></span><span class="line" line="18"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> javax.annotation.Resource;
</span></span><span class="line" line="19"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> javax.servlet.http.HttpSession;
</span></span><span class="line" line="20"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> java.io.*;
</span></span><span class="line" line="21"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> java.nio.file.Files;
</span></span><span class="line" line="22"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> java.nio.file.Paths;
</span></span><span class="line" line="23"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> java.util.HashMap;
</span></span><span class="line" line="24"><span class="ct-b266b4">import</span><span class="ct-9be2f0"> java.util.Map;
</span></span><span class="line" line="25"><span>
</span></span><span class="line" line="26"><span class="ct-9be2f0">@</span><span class="ct-1febfe">Controller
</span></span><span class="line" line="27"><span class="ct-9be2f0">@</span><span class="ct-1febfe">RequestMapping</span><span class="ct-9be2f0">(</span><span class="ct-d0493d">&quot;/test&quot;</span><span class="ct-9be2f0">)
</span></span><span class="line" line="28"><span class="ct-b266b4">public</span><span class="ct-9be2f0"> </span><span class="ct-b266b4">class</span><span class="ct-9be2f0"> </span><span class="ct-1febfe">TestController</span><span class="ct-9be2f0"> {
</span></span><span class="line" line="29"><span class="ct-9be2f0">    @</span><span class="ct-1febfe">Resource
</span></span><span class="line" line="30"><span class="ct-9be2f0">    </span><span class="ct-b266b4">private</span><span class="ct-9be2f0"> </span><span class="ct-1febfe">TemplateEngine</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">templateEngine</span><span class="ct-9be2f0">;
</span></span><span class="line" line="31"><span>
</span></span><span class="line" line="32"><span class="ct-9be2f0">    @</span><span class="ct-1febfe">GetMapping</span><span class="ct-9be2f0">(</span><span class="ct-d0493d">&quot;pdf&quot;</span><span class="ct-9be2f0">)
</span></span><span class="line" line="33"><span class="ct-9be2f0">    </span><span class="ct-b266b4">public</span><span class="ct-9be2f0"> </span><span class="ct-1febfe">void</span><span class="ct-9be2f0"> </span><span class="ct-a78fc5">importPdf</span><span class="ct-9be2f0">() </span><span class="ct-b266b4">throws</span><span class="ct-9be2f0"> </span><span class="ct-1febfe">IOException</span><span class="ct-9be2f0">{
</span></span><span class="line" line="34"><span class="ct-9be2f0">        </span><span class="ct-1febfe">String</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">outputFolder</span><span class="ct-9be2f0"> = </span><span class="ct-d0493d">&quot;C:</span><span class="ct-5afc4e">\\</span><span class="ct-d0493d">Users</span><span class="ct-5afc4e">\\</span><span class="ct-d0493d">你的用户名</span><span class="ct-5afc4e">\\</span><span class="ct-d0493d">Desktop</span><span class="ct-5afc4e">\\</span><span class="ct-d0493d">新建文件夹</span><span class="ct-5afc4e">\\</span><span class="ct-d0493d">test.pdf&quot;</span><span class="ct-9be2f0">;
</span></span><span class="line" line="35"><span class="ct-9be2f0">        </span><span class="ct-1febfe">OutputStream</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">outputStream</span><span class="ct-9be2f0"> = </span><span class="ct-fd2d23">Files</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">newOutputStream</span><span class="ct-9be2f0">(</span><span class="ct-fd2d23">Paths</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">get</span><span class="ct-9be2f0">(outputFolder));
</span></span><span class="line" line="36"><span>
</span></span><span class="line" line="37"><span class="ct-9be2f0">        </span><span class="ct-1febfe">Context</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">context</span><span class="ct-9be2f0"> = </span><span class="ct-d4fc0e">new</span><span class="ct-9be2f0"> </span><span class="ct-a78fc5">Context</span><span class="ct-9be2f0">();
</span></span><span class="line" line="38"><span class="ct-9be2f0">        </span><span class="ct-fd2d23">context</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">setVariable</span><span class="ct-9be2f0">(</span><span class="ct-d0493d">&quot;sys&quot;</span><span class="ct-9be2f0">, </span><span class="ct-d0493d">&quot;linux&quot;</span><span class="ct-9be2f0">);
</span></span><span class="line" line="39"><span>
</span></span><span class="line" line="40"><span class="ct-9be2f0">        </span><span class="ct-1febfe">String</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">htmlStr</span><span class="ct-9be2f0"> = </span><span class="ct-fd2d23">templateEngine</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">process</span><span class="ct-9be2f0">(</span><span class="ct-d0493d">&quot;pdf&quot;</span><span class="ct-9be2f0">, context);
</span></span><span class="line" line="41"><span>
</span></span><span class="line" line="42"><span class="ct-9be2f0">        </span><span class="ct-1febfe">ConverterProperties</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">properties</span><span class="ct-9be2f0"> = </span><span class="ct-d4fc0e">new</span><span class="ct-9be2f0"> </span><span class="ct-a78fc5">ConverterProperties</span><span class="ct-9be2f0">();
</span></span><span class="line" line="43"><span class="ct-9be2f0">        </span><span class="ct-1febfe">FontProvider</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">fontProvider</span><span class="ct-9be2f0"> = </span><span class="ct-d4fc0e">new</span><span class="ct-9be2f0"> </span><span class="ct-a78fc5">DefaultFontProvider</span><span class="ct-9be2f0">();
</span></span><span class="line" line="44"><span class="ct-9be2f0">        </span><span class="ct-1febfe">FontProgram</span><span class="ct-9be2f0"> </span><span class="ct-fd2d23">fontProgram</span><span class="ct-9be2f0"> = </span><span class="ct-fd2d23">FontProgramFactory</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">createFont</span><span class="ct-9be2f0">(</span><span class="ct-d0493d">&quot;font/cn.ttf&quot;</span><span class="ct-9be2f0">);
</span></span><span class="line" line="45"><span class="ct-9be2f0">        </span><span class="ct-fd2d23">fontProvider</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">addFont</span><span class="ct-9be2f0">(fontProgram);
</span></span><span class="line" line="46"><span class="ct-9be2f0">        </span><span class="ct-fd2d23">properties</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">setFontProvider</span><span class="ct-9be2f0">(fontProvider);
</span></span><span class="line" line="47"><span>
</span></span><span class="line" line="48"><span class="ct-9be2f0">        </span><span class="ct-fd2d23">HtmlConverter</span><span class="ct-9be2f0">.</span><span class="ct-a78fc5">convertToPdf</span><span class="ct-9be2f0">(htmlStr, outputStream, properties);
</span></span><span class="line" line="49"><span class="ct-9be2f0">    }
</span></span><span class="line" line="50"><span>
</span></span><span class="line" line="51"><span class="ct-9be2f0">}
</span></span><span class="line" line="52"></span></code></pre><!--]--><h2 id="注意"><a href="#注意"><!--[-->注意<!--]--></a></h2><h4 id="如果生成-html-字符串时报-javalangclassnotfoundexception-ognldefaultmemberaccess-异常"><a href="#如果生成-html-字符串时报-javalangclassnotfoundexception-ognldefaultmemberaccess-异常"><!--[-->如果生成 Html 字符串时报 【java.lang.ClassNotFoundException: ognl.DefaultMemberAccess】 异常<!--]--></a></h4><!--[--><pre><code><span class="line" line="1"><span class="ct-cd1c6e">&lt;!--添加这个依赖即可--&gt;
</span></span><span class="line" line="2"><span class="ct-cd1c6e">&lt;!--而且最好是3.1.x版本，不然也报错--&gt;
</span></span><span class="line" line="3"><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">dependency</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="4"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">groupId</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">com.itextpdf</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">groupId</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="5"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">artifactId</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">html2pdf</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">artifactId</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="6"><span class="ct-9be2f0">    </span><span class="ct-78c20c">&lt;</span><span class="ct-b266b4">version</span><span class="ct-78c20c">&gt;</span><span class="ct-9be2f0">4.0.2</span><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">version</span><span class="ct-78c20c">&gt;
</span></span><span class="line" line="7"><span class="ct-78c20c">&lt;/</span><span class="ct-b266b4">dependency</span><span class="ct-78c20c">&gt;</span></span></code></pre><!--]--><h2 id="pdf-效果"><a href="#pdf-效果"><!--[-->Pdf 效果<!--]--></a></h2><p><!--[--><img src="https://img-blog.csdnimg.cn/fd20a260902b491c88fdd1fb1201321f.png" alt="在这里插入图片描述"><!--]--></p><style>.ct-d4fc0e{color:#C586C0}
.ct-a78fc5{color:#DCDCAA}
.ct-1febfe{color:#4EC9B0}
.ct-6400a5{color:#F44747}
.ct-5afc4e{color:#D7BA7D}
.ct-fd2d23{color:#9CDCFE}
.ct-d0493d{color:#CE9178}
.ct-9be2f0{color:#D4D4D4}
.ct-b266b4{color:#569CD6}
.ct-78c20c{color:#808080}
.ct-cd1c6e{color:#6A9955}</style></div><!--]--></div><!--]--></main></div><!--]--></div><script type="module">import p from "/articles/0005/_payload.js";window.__NUXT__={...p,...((function(a,b,c){return {state:{},_errors:{"content-query-2rGAyeLc8t":null},serverRendered:c,prerenderedAt:1683914230176,config:{public:{content:{locales:[],defaultLocale:b,integrity:1683914204831,experimental:{stripQueryParameters:a,clientDB:a,advancedIgnoresPattern:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:c,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}}}}(false,"",true)))}</script><script type="module" src="/_nuxt/entry.243eae19.js" crossorigin></script></body>
</html>