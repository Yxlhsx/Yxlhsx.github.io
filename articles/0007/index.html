<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>Mybatis+Mysql+Maven</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Mybatis+Mysql+Maven">
<meta name="description" content="Maven做包管理，Mybatis实现连接Mysql简单查询">
<meta property="og:description" content="Maven做包管理，Mybatis实现连接Mysql简单查询"><link rel="modulepreload" href="/articles/0007/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/static/entry.89850182.js"><link rel="preload" as="style" href="/static/entry.25dcdbaa.css"><link rel="modulepreload" as="script" crossorigin href="/static/_...slug_.d21b5067.js"><link rel="modulepreload" as="script" crossorigin href="/static/ContentDoc.aadac1a8.js"><link rel="modulepreload" as="script" crossorigin href="/static/ContentRenderer.4f983b78.js"><link rel="modulepreload" as="script" crossorigin href="/static/ContentRendererMarkdown.d73bec56.js"><link rel="modulepreload" as="script" crossorigin href="/static/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/static/ContentQuery.1a223460.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseH1.870c4a62.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseP.181dda9d.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseH2.b987645e.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseEm.3aa0b897.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseCode.4ae10726.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseImg.8b04c504.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseUl.78d85297.js"><link rel="modulepreload" as="script" crossorigin href="/static/ProseLi.4eca9fd9.js"><link rel="prefetch" as="image" type="image/png" href="/static/logo.a48fd503.png"><link rel="prefetch" as="script" crossorigin href="/static/client-db.7c32711c.js"><link rel="prefetch" as="script" crossorigin href="/static/error-component.b4bcea4b.js"><link rel="stylesheet" href="/static/entry.25dcdbaa.css"><style>pre code .line{display:block;min-height:1rem}</style></head>
<body class="overflow-hidden overflow-y-scroll bg-[#f3f3f3] text-[#282828]"><div id="__nuxt"><!--[--><header class="flex justify-center w-full bg-white"><!--[--><div class="box-border m-3 w-8/12 sm:w-96 h-10 bg-gray-100 rounded-md text-center text-gray-900 text-xl font-medium leading-10 cursor-pointer"> 搜索 </div><!----><!--]--></header><div class="sm:flex justify-center"><aside class="px-5 sm:px-0 sm:w-72"><section style="" class="mt-5 mr-0 sm:mr-5 p-3 rounded-lg bg-white text-base font-semibold text-center cursor-pointer"><span class="go-back">返回上一页</span></section><div style="" class="flex sm:block justify-between"><section class="mt-5 mr-5 p-3 max-sm:w-1/2 rounded-lg bg-white"><div class="flex justify-evenly items-center mb-5"><img class="w-10 sm:w-16 h-10 sm:h-16" src="/static/logo.a48fd503.png" alt="logo"><div class="text-center"><h3 class="text-xl font-semibold">嘎嘣脆</h3><h5 class="text-[#28282899] text-sm">“努力，奋斗”</h5></div></div><ul class="flex justify-evenly list-none"><!--[--><li class="text-opacity-60 text-sm underline cursor-pointer"><span>邮箱</span></li><li class="text-opacity-60 text-sm underline cursor-pointer"><a href="https://github.com/Yxlhsx" rel="noopener noreferrer">GitHub</a></li><li class="text-opacity-60 text-sm underline cursor-pointer"><a href="https://space.bilibili.com/31257626?spm_id_from=333.1007.0.0" rel="noopener noreferrer">BiliBili</a></li><!--]--></ul></section><section class="mt-5 sm:mr-5 p-3 max-sm:w-1/2 rounded-lg bg-white"><h2 class="text-xl font-semibold text-center">标签</h2><ul class="max-sm:overflow-y-scroll flex flex-wrap mt-3 max-sm:max-h-14 list-none"><!--[--><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#JavaScript(20)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#SpringBoot(2)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#NuxtJs(6)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Mysql(4)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Java(9)</li><li class="mr-3 text-[#28282899] text-sm underline cursor-pointer">#Flutter(10)</li><!--]--></ul></section></div></aside><main class="mt-5 pb-10 w-auto sm:w-5/12"><!--[--><div class="prose box-border max-sm:mx-5 p-5 sm:p-8 bg-white rounded-lg"><!--[--><div><h1 id="新建一个空的-maven-项目"><!--[-->新建一个空的 Maven 项目<!--]--></h1><p><!--[-->自行创建就行<!--]--></p><h1 id="引入-maven-依赖项"><!--[-->引入 Maven 依赖项<!--]--></h1><h2 id="mybatis"><a href="#mybatis"><!--[-->mybatis<!--]--></a></h2><p><!--[--><em><!--[-->（版本可以去下方链接中咨询查询替换）<!--]--></em><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-3f259a">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;
</span></span><span class="line" line="2"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">dependency</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="3"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">groupId</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">org.mybatis</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">groupId</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="4"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">artifactId</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">mybatis</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">artifactId</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="5"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">version</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">3.5.10</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">version</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="6"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">dependency</span><span class="ct-102dc9">&gt;</span></span></code></pre><!--]--><h2 id="mysql"><a href="#mysql"><!--[-->mysql<!--]--></a></h2><p><!--[--><em><!--[-->（版本可以去下方链接中咨询查询替换）<!--]--></em><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-3f259a">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;
</span></span><span class="line" line="2"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">dependency</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="3"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">groupId</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">mysql</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">groupId</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="4"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">artifactId</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">mysql-connector-java</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">artifactId</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="5"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">version</span><span class="ct-102dc9">&gt;</span><span class="ct-b63513">8.0.29</span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">version</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="6"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">dependency</span><span class="ct-102dc9">&gt;</span></span></code></pre><!--]--><h1 id="创建目录以及文件"><!--[-->创建目录以及文件<!--]--></h1><p><!--[-->创建如图一下目录以及文件：
<img src="https://img-blog.csdnimg.cn/556e4c669492415ab18fafadbc486bee.png" alt="在这里插入图片描述"><!--]--></p><ul><!--[--><li><!--[-->src<ul><!--[--><li><!--[-->main<ul><!--[--><li><!--[-->java<ul><!--[--><li><!--[-->mapper<ul><!--[--><li><!--[-->UserMapper.java<!--]--></li><!--]--></ul><!--]--></li><li><!--[-->model<ul><!--[--><li><!--[-->User.java<!--]--></li><!--]--></ul><!--]--></li><li><!--[-->util<ul><!--[--><li><!--[-->MybatisUtil.java<!--]--></li><!--]--></ul><!--]--></li><li><!--[-->Main.java<!--]--></li><!--]--></ul><!--]--></li><li><!--[-->resources<ul><!--[--><li><!--[-->mapper<!--]--></li><li><!--[-->db.properties<!--]--></li><li><!--[-->mybatis-config.xml<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><h1 id="配置文件"><!--[-->配置文件<!--]--></h1><h2 id="dbproperties"><a href="#dbproperties"><!--[-->db.properties<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-b63513">driver=com.mysql.cj.jdbc.Driver
</span></span><span class="line" line="2"><span class="ct-b63513">url=jdbc:mysql://localhost:3306/test?useUnicode=true</span><span class="ct-5ec3f0">&amp;</span><span class="ct-b63513">characterEncoding=utf8</span><span class="ct-5ec3f0">&amp;</span><span class="ct-b63513">zeroDateTimeBehavior=convertToNull</span><span class="ct-5ec3f0">&amp;</span><span class="ct-b63513">useSSL=true</span><span class="ct-5ec3f0">&amp;</span><span class="ct-b63513">serverTimezone=GMT%2B8
</span></span><span class="line" line="3"><span class="ct-b63513">username=root
</span></span><span class="line" line="4"><span class="ct-b63513">password=</span></span></code></pre><!--]--><h2 id="mybatis-configxml"><a href="#mybatis-configxml"><!--[-->mybatis-config.xml<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-102dc9">&lt;?</span><span class="ct-01a095">xml</span><span class="ct-8b5211"> version</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;1.0&quot;</span><span class="ct-8b5211"> encoding</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;UTF-8&quot;</span><span class="ct-b63513"> </span><span class="ct-102dc9">?&gt;
</span></span><span class="line" line="2"><span class="ct-102dc9">&lt;!</span><span class="ct-01a095">DOCTYPE</span><span class="ct-b63513"> </span><span class="ct-01a095">configuration</span><span class="ct-b63513"> PUBLIC &quot;-//mybatis.org//DTD Config 3.0 //EN&quot;
</span></span><span class="line" line="3"><span class="ct-b63513">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="4"><span class="ct-102dc9">&lt;</span><span class="ct-01a095">configuration</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="5"><span class="ct-b63513">    </span><span class="ct-3f259a">&lt;!--引入外部文件--&gt;
</span></span><span class="line" line="6"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">properties</span><span class="ct-b63513"> </span><span class="ct-8b5211">resource</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;db.properties&quot;</span><span class="ct-102dc9">&gt;&lt;/</span><span class="ct-01a095">properties</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="7"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">settings</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="8"><span class="ct-b63513">        </span><span class="ct-3f259a">&lt;!--
</span></span><span class="line" line="9"><span class="ct-3f259a">        是否开启驼峰命名自动映射，
</span></span><span class="line" line="10"><span class="ct-3f259a">        即从经典数据库列名 A_COLUMN 映射到经典 Java 属性名 aColumn。
</span></span><span class="line" line="11"><span class="ct-3f259a">        --&gt;
</span></span><span class="line" line="12"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">setting</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;mapUnderscoreToCamelCase&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">value</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;true&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="13"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">settings</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="14"><span class="ct-b63513">    </span><span class="ct-3f259a">&lt;!--设置别名，方便调用--&gt;
</span></span><span class="line" line="15"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">typeAliases</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="16"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">package</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;model&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="17"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">typeAliases</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="18"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">environments</span><span class="ct-b63513"> </span><span class="ct-8b5211">default</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;mysql&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="19"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">environment</span><span class="ct-b63513"> </span><span class="ct-8b5211">id</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;mysql&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="20"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">transactionManager</span><span class="ct-b63513"> </span><span class="ct-8b5211">type</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;JDBC&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="21"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">dataSource</span><span class="ct-b63513"> </span><span class="ct-8b5211">type</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;POOLED&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="22"><span class="ct-b63513">                </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">property</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;driver&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">value</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;${driver}&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="23"><span class="ct-b63513">                </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">property</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;url&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">value</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;${url}&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="24"><span class="ct-b63513">                </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">property</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;username&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">value</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;${username}&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="25"><span class="ct-b63513">                </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">property</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;password&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">value</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;${password}&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="26"><span class="ct-b63513">            </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">dataSource</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="27"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">environment</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="28"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">environments</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="29"><span class="ct-b63513">    </span><span class="ct-3f259a">&lt;!--每一个mapper.xml需要有一个对应的mapper--&gt;
</span></span><span class="line" line="30"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">mappers</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="31"><span class="ct-b63513">        </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">package</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;mapper&quot;</span><span class="ct-102dc9">/&gt;
</span></span><span class="line" line="32"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">mappers</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="33"><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">configuration</span><span class="ct-102dc9">&gt;</span></span></code></pre><!--]--><h2 id="usermapperxml"><a href="#usermapperxml"><!--[-->UserMapper.xml<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-102dc9">&lt;?</span><span class="ct-01a095">xml</span><span class="ct-8b5211"> version</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;1.0&quot;</span><span class="ct-8b5211"> encoding</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;UTF-8&quot;</span><span class="ct-b63513"> </span><span class="ct-102dc9">?&gt;
</span></span><span class="line" line="2"><span class="ct-102dc9">&lt;!</span><span class="ct-01a095">DOCTYPE</span><span class="ct-b63513"> </span><span class="ct-01a095">mapper
</span></span><span class="line" line="3"><span class="ct-b63513">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
</span></span><span class="line" line="4"><span class="ct-b63513">        &quot;http://www.mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="5"><span>
</span></span><span class="line" line="6"><span class="ct-102dc9">&lt;</span><span class="ct-01a095">mapper</span><span class="ct-b63513"> </span><span class="ct-8b5211">namespace</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;mapper.UserMapper&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="7"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;</span><span class="ct-01a095">select</span><span class="ct-b63513"> </span><span class="ct-8b5211">id</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;list&quot;</span><span class="ct-b63513"> </span><span class="ct-8b5211">resultType</span><span class="ct-b63513">=</span><span class="ct-41d5c1">&quot;User&quot;</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="8"><span class="ct-b63513">        SELECT * FROM user
</span></span><span class="line" line="9"><span class="ct-b63513">    </span><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">select</span><span class="ct-102dc9">&gt;
</span></span><span class="line" line="10"><span class="ct-102dc9">&lt;/</span><span class="ct-01a095">mapper</span><span class="ct-102dc9">&gt;</span></span></code></pre><!--]--><h1 id="工具类"><!--[-->工具类<!--]--></h1><h2 id="mybatisutiljava"><a href="#mybatisutiljava"><!--[-->MybatisUtil.java<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-01a095">package</span><span class="ct-b63513"> util;
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span class="ct-01a095">import</span><span class="ct-b63513"> org.apache.ibatis.io.Resources;
</span></span><span class="line" line="4"><span class="ct-01a095">import</span><span class="ct-b63513"> org.apache.ibatis.session.SqlSession;
</span></span><span class="line" line="5"><span class="ct-01a095">import</span><span class="ct-b63513"> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span class="line" line="6"><span class="ct-01a095">import</span><span class="ct-b63513"> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span class="line" line="7"><span>
</span></span><span class="line" line="8"><span class="ct-01a095">import</span><span class="ct-b63513"> java.io.IOException;
</span></span><span class="line" line="9"><span class="ct-01a095">import</span><span class="ct-b63513"> java.io.InputStream;
</span></span><span class="line" line="10"><span>
</span></span><span class="line" line="11"><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">class</span><span class="ct-b63513"> </span><span class="ct-cce4a8">MybatisUtil</span><span class="ct-b63513"> {
</span></span><span class="line" line="12"><span class="ct-b63513">    </span><span class="ct-01a095">private</span><span class="ct-b63513"> </span><span class="ct-01a095">static</span><span class="ct-b63513"> </span><span class="ct-cce4a8">SqlSessionFactory</span><span class="ct-b63513"> </span><span class="ct-8b5211">sqlSessionFactory</span><span class="ct-b63513">;
</span></span><span class="line" line="13"><span>
</span></span><span class="line" line="14"><span class="ct-b63513">    </span><span class="ct-01a095">static</span><span class="ct-b63513"> {
</span></span><span class="line" line="15"><span class="ct-b63513">        </span><span class="ct-a3f7ce">try</span><span class="ct-b63513"> {
</span></span><span class="line" line="16"><span class="ct-b63513">            </span><span class="ct-3f259a">/*
</span></span><span class="line" line="17"><span class="ct-3f259a">            由于文件是存放在resources路径下的，
</span></span><span class="line" line="18"><span class="ct-3f259a">            所以此处默认是指向resources下的文件，
</span></span><span class="line" line="19"><span class="ct-3f259a">            故只写对应的文件名就能读取到指定的文件了
</span></span><span class="line" line="20"><span class="ct-3f259a">            */
</span></span><span class="line" line="21"><span class="ct-b63513">            </span><span class="ct-cce4a8">String</span><span class="ct-b63513"> </span><span class="ct-8b5211">resource</span><span class="ct-b63513"> = </span><span class="ct-41d5c1">&quot;mybatis-config.xml&quot;</span><span class="ct-b63513">;
</span></span><span class="line" line="22"><span class="ct-b63513">            </span><span class="ct-cce4a8">InputStream</span><span class="ct-b63513"> </span><span class="ct-8b5211">inputStream</span><span class="ct-b63513"> = </span><span class="ct-8b5211">Resources</span><span class="ct-b63513">.</span><span class="ct-77eda8">getResourceAsStream</span><span class="ct-b63513">(resource);
</span></span><span class="line" line="23"><span class="ct-b63513">            sqlSessionFactory = </span><span class="ct-a3f7ce">new</span><span class="ct-b63513"> </span><span class="ct-77eda8">SqlSessionFactoryBuilder</span><span class="ct-b63513">().</span><span class="ct-77eda8">build</span><span class="ct-b63513">(inputStream);
</span></span><span class="line" line="24"><span class="ct-b63513">        } </span><span class="ct-a3f7ce">catch</span><span class="ct-b63513"> (</span><span class="ct-cce4a8">IOException</span><span class="ct-b63513"> </span><span class="ct-8b5211">e</span><span class="ct-b63513">) {
</span></span><span class="line" line="25"><span class="ct-b63513">            </span><span class="ct-8b5211">e</span><span class="ct-b63513">.</span><span class="ct-77eda8">printStackTrace</span><span class="ct-b63513">();
</span></span><span class="line" line="26"><span class="ct-b63513">        }
</span></span><span class="line" line="27"><span class="ct-b63513">    }
</span></span><span class="line" line="28"><span>
</span></span><span class="line" line="29"><span class="ct-b63513">    </span><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">static</span><span class="ct-b63513"> </span><span class="ct-cce4a8">SqlSession</span><span class="ct-b63513"> </span><span class="ct-77eda8">getSqlSession</span><span class="ct-b63513">() {
</span></span><span class="line" line="30"><span class="ct-b63513">        </span><span class="ct-3f259a">//设置为true是为了进行增删改的时候可以自动提交事务
</span></span><span class="line" line="31"><span class="ct-b63513">        </span><span class="ct-a3f7ce">return</span><span class="ct-b63513"> </span><span class="ct-8b5211">sqlSessionFactory</span><span class="ct-b63513">.</span><span class="ct-77eda8">openSession</span><span class="ct-b63513">(</span><span class="ct-01a095">true</span><span class="ct-b63513">);
</span></span><span class="line" line="32"><span class="ct-b63513">    }
</span></span><span class="line" line="33"><span class="ct-b63513">}
</span></span><span class="line" line="34"></span></code></pre><!--]--><h1 id="实体类"><!--[-->实体类<!--]--></h1><h2 id="userjava"><a href="#userjava"><!--[-->User.java<!--]--></a></h2><p><!--[-->（getter、setter 等自行生成即可）
（mysql 数据库表也同改实体类结构即可）<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-01a095">package</span><span class="ct-b63513"> model;
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">class</span><span class="ct-b63513"> </span><span class="ct-cce4a8">User</span><span class="ct-b63513"> {
</span></span><span class="line" line="4"><span class="ct-b63513">    </span><span class="ct-cce4a8">int</span><span class="ct-b63513"> </span><span class="ct-8b5211">id</span><span class="ct-b63513">;
</span></span><span class="line" line="5"><span class="ct-b63513">    </span><span class="ct-cce4a8">String</span><span class="ct-b63513"> </span><span class="ct-8b5211">name</span><span class="ct-b63513">;
</span></span><span class="line" line="6"><span class="ct-b63513">    </span><span class="ct-cce4a8">int</span><span class="ct-b63513"> </span><span class="ct-8b5211">age</span><span class="ct-b63513">;
</span></span><span class="line" line="7"><span class="ct-b63513">}
</span></span><span class="line" line="8"></span></code></pre><!--]--><h1 id="持久层"><!--[-->持久层<!--]--></h1><h2 id="usermapper"><a href="#usermapper"><!--[-->UserMapper<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-01a095">package</span><span class="ct-b63513"> mapper;
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span class="ct-01a095">import</span><span class="ct-b63513"> model.User;
</span></span><span class="line" line="4"><span>
</span></span><span class="line" line="5"><span class="ct-01a095">import</span><span class="ct-b63513"> java.util.List;
</span></span><span class="line" line="6"><span>
</span></span><span class="line" line="7"><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">interface</span><span class="ct-b63513"> </span><span class="ct-cce4a8">UserMapper</span><span class="ct-b63513"> {
</span></span><span class="line" line="8"><span class="ct-b63513">    </span><span class="ct-cce4a8">List</span><span class="ct-b63513">&lt;</span><span class="ct-cce4a8">User</span><span class="ct-b63513">&gt; </span><span class="ct-77eda8">list</span><span class="ct-b63513">();
</span></span><span class="line" line="9"><span class="ct-b63513">}
</span></span><span class="line" line="10"></span></code></pre><!--]--><h1 id="启动类"><!--[-->启动类<!--]--></h1><h2 id="mainjava"><a href="#mainjava"><!--[-->Main.java<!--]--></a></h2><!--[--><pre><code><span class="line" line="1"><span class="ct-01a095">import</span><span class="ct-b63513"> mapper.UserMapper;
</span></span><span class="line" line="2"><span class="ct-01a095">import</span><span class="ct-b63513"> model.User;
</span></span><span class="line" line="3"><span class="ct-01a095">import</span><span class="ct-b63513"> org.apache.ibatis.session.SqlSession;
</span></span><span class="line" line="4"><span class="ct-01a095">import</span><span class="ct-b63513"> util.MybatisUtil;
</span></span><span class="line" line="5"><span>
</span></span><span class="line" line="6"><span class="ct-01a095">import</span><span class="ct-b63513"> java.util.List;
</span></span><span class="line" line="7"><span>
</span></span><span class="line" line="8"><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">class</span><span class="ct-b63513"> </span><span class="ct-cce4a8">Main</span><span class="ct-b63513"> {
</span></span><span class="line" line="9"><span class="ct-b63513">    </span><span class="ct-01a095">public</span><span class="ct-b63513"> </span><span class="ct-01a095">static</span><span class="ct-b63513"> </span><span class="ct-cce4a8">void</span><span class="ct-b63513"> </span><span class="ct-77eda8">main</span><span class="ct-b63513">(</span><span class="ct-cce4a8">String</span><span class="ct-b63513">[] </span><span class="ct-8b5211">args</span><span class="ct-b63513">) {
</span></span><span class="line" line="10"><span class="ct-b63513">        </span><span class="ct-cce4a8">SqlSession</span><span class="ct-b63513"> </span><span class="ct-8b5211">sqlSession</span><span class="ct-b63513"> = </span><span class="ct-8b5211">MybatisUtil</span><span class="ct-b63513">.</span><span class="ct-77eda8">getSqlSession</span><span class="ct-b63513">();
</span></span><span class="line" line="11"><span class="ct-b63513">        </span><span class="ct-cce4a8">UserMapper</span><span class="ct-b63513"> </span><span class="ct-8b5211">userDao</span><span class="ct-b63513"> = </span><span class="ct-8b5211">sqlSession</span><span class="ct-b63513">.</span><span class="ct-77eda8">getMapper</span><span class="ct-b63513">(</span><span class="ct-8b5211">UserMapper</span><span class="ct-b63513">.</span><span class="ct-8b5211">class</span><span class="ct-b63513">);
</span></span><span class="line" line="12"><span class="ct-b63513">        </span><span class="ct-cce4a8">List</span><span class="ct-b63513">&lt;</span><span class="ct-cce4a8">User</span><span class="ct-b63513">&gt; </span><span class="ct-8b5211">userList</span><span class="ct-b63513"> = </span><span class="ct-8b5211">userDao</span><span class="ct-b63513">.</span><span class="ct-77eda8">list</span><span class="ct-b63513">();
</span></span><span class="line" line="13"><span class="ct-b63513">        </span><span class="ct-a3f7ce">for</span><span class="ct-b63513"> (</span><span class="ct-cce4a8">User</span><span class="ct-b63513"> </span><span class="ct-8b5211">user</span><span class="ct-b63513"> </span><span class="ct-a3f7ce">:</span><span class="ct-b63513"> userList) {
</span></span><span class="line" line="14"><span class="ct-b63513">            </span><span class="ct-8b5211">System</span><span class="ct-b63513">.</span><span class="ct-8b5211">out</span><span class="ct-b63513">.</span><span class="ct-77eda8">println</span><span class="ct-b63513">(user);
</span></span><span class="line" line="15"><span class="ct-b63513">        }
</span></span><span class="line" line="16"><span class="ct-b63513">        </span><span class="ct-3f259a">//关闭资源，避免资源浪费
</span></span><span class="line" line="17"><span class="ct-b63513">        </span><span class="ct-8b5211">sqlSession</span><span class="ct-b63513">.</span><span class="ct-77eda8">close</span><span class="ct-b63513">();
</span></span><span class="line" line="18"><span class="ct-b63513">    }
</span></span><span class="line" line="19"><span class="ct-b63513">}
</span></span><span class="line" line="20"></span></code></pre><!--]--><h1 id="运行结果"><!--[-->运行结果<!--]--></h1><!--[--><pre><code><span class="line" line="1"><span class="ct-b63513">model.User{id=</span><span class="ct-f128be">1</span><span class="ct-b63513">, name=</span><span class="ct-41d5c1">&#39;张三&#39;</span><span class="ct-b63513">, age=</span><span class="ct-f128be">28</span><span class="ct-b63513">}
</span></span><span class="line" line="2"><span>
</span></span><span class="line" line="3"><span class="ct-a3f7ce">Process</span><span class="ct-b63513"> finished with </span><span class="ct-a3f7ce">exit</span><span class="ct-b63513"> code </span><span class="ct-f128be">0
</span></span><span class="line" line="4"></span></code></pre><!--]--><p><!--[-->收工。<!--]--></p><style>.ct-f128be{color:#B5CEA8}
.ct-77eda8{color:#DCDCAA}
.ct-a3f7ce{color:#C586C0}
.ct-cce4a8{color:#4EC9B0}
.ct-41d5c1{color:#CE9178}
.ct-8b5211{color:#9CDCFE}
.ct-5ec3f0{color:#F44747}
.ct-01a095{color:#569CD6}
.ct-102dc9{color:#808080}
.ct-b63513{color:#D4D4D4}
.ct-3f259a{color:#6A9955}</style></div><!--]--></div><!--]--></main></div><!--]--></div><script type="module">import p from "/articles/0007/_payload.js";window.__NUXT__={...p,...((function(a,b,c){return {state:{},_errors:{"content-query-61iuFRFGic":null},serverRendered:c,prerenderedAt:1684161108796,config:{public:{content:{locales:[],defaultLocale:b,integrity:1684161094842,experimental:{stripQueryParameters:a,clientDB:a,advancedIgnoresPattern:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:c,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002Fstatic\u002F",cdnURL:b}}}}(false,"",true)))}</script><script type="module" src="/static/entry.89850182.js" crossorigin></script></body>
</html>